---
title: "Positive Relationship between a Country's Employment Rate and Permanent Immigrant Inflows"
subtitle: "An Analysis of Canada's Employment Rate and Permanent Immigrant Inflows"
author: 
  - Jenny Shen
thanks: "Code and data are available at: https://github.com/jennyshen-playground/analysis_of_employment_rate_perminant_immigrant_inflows.git."
date: "`r Sys.time()`"
date-format: "D MMMM YYYY"
format: 
  pdf:
    documentclass: article
    geometry: margin = 1in
    abstract: "This paper explores the relationship between a country's employment rate and its ability to attract and retain permanent immigrants. Using a linear regression analysis, we examine five countries with relatively high immigration numbers: United States, Canada, United Kingdom, Australia, and Japan from 2008 to 2018. We drawn data  from the OECD website, with a focus on the percentage of the working-age population. These findings matter as they can influence permanent immigrant inflows and guide governments in developing policies to attract and retain permanent immigrants.The rise of employment rate can enhance economic development, and also associates with increased number of permanent immigrants inflow. This suggests that improving employment rate leads to better immigration that generate significant economic and social benefits for a country."
number-sections: true
bibliography: references.bib
---

# Introduction

Immigration has been a key driver of economic growth and cultural diversity for countries around the world. Over the past two decades, many countries have opened doors to immigration, recognizing the significant economic and social benefits that immigration can bring. However, immigration policies and their implementation have varied across countries, with some facing challenges in attracting and retaining permanent immigrants. One possible factor that could influence a country's ability to attract and retain immigrants is its employment rate. High employment rates means that the country has economic stability and job opportunities, making a country a more attractive destination for permanent immigrants. Whereas, low employment rates could signal economic instability, leading to a decrease in permanent immigrant inflows.

In this paper, we will examine the relationship between a country's employment rate and permanent immigrant inflows through a linear regression analysis, The estimand here is how employment rate and immigrants inflows are related. Specifically, we will focus Canada, which has relatively high immigration number. We will draw data from the OECD website. Our respondents of interest are the percentage of the working-age population, as they represent the potential labor force and have a significant impact on a country's economic growth and development.

Understanding the relationship between the employment rate and permanent immigrant inflows is a critical factor for governments to design effective immigration policies and to drive social and economic development. This exploration can provide valuable insights for government officials and policy makers in developing policies to attract and retain permanent immigrants and influencing permanent immigrant inflows. In addition, this research can impact immigration policy, as well as economic development strategies that can benefit the labour market and immigration.

In section 1, we discuss the source of data used in this paper, the strengths and weaknesses of OECD, methodologies that follow it, and data terminology. In section 2, we present the results of our analysis, focusing on the trajectory of employment rate and permanent immigrant inflows over the past 20 years in Canada. In section 3, we explore the factors that contribute to permanent immigrant inflows and We will examine the patterns and trends to highlight the similarities and differences in each countries immigration patterns. In particular, how economic factor influence a country's ability to attract and retain permanent immigrants.The final section provides an analysis of the bias and ethical concerns, and weakness and steps.

# Data {#sec-data}

```{r}
#| include: false
#| warning: false
#| message: false

#### Initialize quarto workspace by reading csv's ####
library(tidyverse)
library(here)

permanent_immigrant_cleaned <- read_csv(here::here("inputs/data/permanent_immigrant_inflows_cleaned.csv"))
employment_rate_cleaned <- read_csv(here::here("inputs/data/employment_rate_cleaned.csv"))
total_population_cleaned <- read_csv(here::here("inputs/data/total_population_cleaned.csv"))
merged_data <- read_csv(here::here("inputs/data/merged_data.csv"))

```

```{r}
#| echo: false
#| warning: false

library(knitr)
kable(merged_data)

```

## Permanent Immigrants Inflows Rate from 2009 to 2019

```{r}
#| label: fig-1
#| fig-cap: A graph detailing that the overall increase in Canada's permenant immigration inflow from 2009 to 2019 which is from 249292 to 341173.
#| echo: false
#| warning: false

merged_data |>
  group_by(Year) |>
  ggplot(aes(x = Year, y = `Permanent Inflows Rate`)) + # Use correct column name
  geom_line(group = 1, color = "red") +
  scale_x_continuous(breaks = seq(2009, 2019, by = 1), labels = c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019")) +
  theme_bw() +
  labs(
    title = "Permanent Immigrants Inflows Rate from 2009 to 2019",
    x = "Year",
    y = "Permanent Immigrants Inflows Rate" 
  )

```

\
\## Employment Rate from 2009 to 2019

```{r}
#| label: fig-2
#| fig-cap: "A graph detailing that the overall increase in Canada's permenant immigration inflow from 2009 to 2019 which is from 249292 to 341173."
#| echo: false
#| warning: false
merged_data %>%
  group_by(Year) %>%
  mutate(`Employment Rate` = sum(`Employment Rate`, na.rm = TRUE)) %>%
  ggplot(aes(x = Year, y = `Employment Rate`)) +
  geom_line(group = 1, color = "blue") +
  scale_x_continuous(breaks = seq(2009, 2019, by = 1), labels = c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019")) +
  theme_bw() +
  labs(
    title = "Employment Rate in Canada from 2009 to 2019",
    x = "Year",
    y = "Employment Rate" 
  )

```

# Model

```{r}
#| echo: false
#| warning: false
#| label: tab-1
#| tab-cap: "A summary table of two linear regression models"

library(modelsummary)

merged_data <-
  merged_data |>
  mutate(Centred_Employment_Rate = `Employment Rate` - mean(merged_data$`Employment Rate`))

merged_data_centered_model <-
  lm(
    `Permanent Inflows Rate` ~ `Employment Rate`,
    data = merged_data
  )

modelsummary::modelsummary(
  list("Employment Rate" = merged_data_centered_model),
  fmt = 2
)

```

```{r}
#| label: fig-3
#| fig-cap: "A graph detailing that the overall increase in Canada's permenant immigration inflow from 2009 to 2019 which is from 249292 to 341173."
#| echo: false
#| warning: false

library(ggplot2)

merged_data %>%
  ggplot(aes(x = `Employment Rate`, y = `Permanent Inflows Rate`)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", se = TRUE, color = "black", linetype = "dashed") +
  labs(x = "Employment Rate (percentage)", y = "Permanent Inflows Rate (percentage)",
       title = "Relationship between Employment Rate and Permanent Inflows Rate") +
  theme_classic()

```

$$
Pr(\theta | y) = \frac{Pr(y | \theta) Pr(\theta)}{Pr(y)}
$$ {#eq-bayes}

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details]

## Model set-up

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.

# Results

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {.unnumbered}

# Additional details

\newpage

# References
